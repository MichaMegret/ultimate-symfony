{% extends "base.html.twig" %}

{% block title %}
    Mes commandes
{% endblock %}

{% block body %}

<h1 class='text-center mb-5'>Mes commandes</h1>

<table class="table">
    <thead>
        <tr>
            <th>Numéro</th>
            <th>Adresse</th>
            <th>Date de commande</th>
            <th>Produits</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody>
        {% for p in purchases %}
            <tr>
                <td>{{ p.id }}</td>
                <td>{{ p.adress }} {{ p.postalCode }}, {{ p.city }}</td> 
                {# <td>{{ p.purchasedAt.format("d/m/Y H:i") }}</td> #}
                <td>{{ p.purchasedAt | date("d/m/Y H:i") }}</td>
                <td>
                    <ul>
                        {% for item in p.purchaseItems %}
                            <li>{{ item.quantity }} x {{ item.productName }} ({{ item.total | format_number({fraction_digit: 2}) }} €)</li>
                        {% endfor %}
                    </ul>
                </td>
                <td>{{ p.total | format_number({fraction_digit: 2}) }} €</td>
            </tr>
        {% endfor %}
    </tbody>
</table>


{% endblock %}